<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:extensions="clr-namespace:NovelBook.Extensions"
             x:Class="NovelBook.Views.WriteReviewPage"
             Title="{extensions:Translate WriteReviewTitle}"
             BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundDarkLight}, Dark=#121212}">

    <ContentPage.Content>
        <ScrollView>
            <StackLayout Padding="20" Spacing="20">

                <!-- Título de la novela -->
                <Label x:Name="NovelTitleLabel"
                       TextColor="{AppThemeBinding Light={StaticResource TextPrimaryLight}, Dark=White}"
                       FontSize="20"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"/>

                <!-- Sección de calificación -->
                <Frame BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundMediumLight}, Dark=#1E1E1E}" 
                       CornerRadius="10" 
                       Padding="20"
                       HasShadow="False">
                    <StackLayout Spacing="15">
                        <Label Text="{extensions:Translate YourRating}"
                               TextColor="{AppThemeBinding Light={StaticResource TextPrimaryLight}, Dark=White}"
                               FontSize="18"
                               FontAttributes="Bold"
                               HorizontalOptions="Center"/>

                        <!-- Estrellas para calificar -->
                        <Grid HorizontalOptions="Center" ColumnSpacing="5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="60"/>
                                <ColumnDefinition Width="60"/>
                                <ColumnDefinition Width="60"/>
                                <ColumnDefinition Width="60"/>
                                <ColumnDefinition Width="60"/>
                            </Grid.ColumnDefinitions>

                            <Button Grid.Column="0" 
                                    x:Name="Star1"
                                    Text="☆" 
                                    BackgroundColor="Transparent"
                                    TextColor="#FFD700"
                                    FontSize="40"
                                    Clicked="OnStarClicked"
                                    CommandParameter="1"/>

                            <Button Grid.Column="1" 
                                    x:Name="Star2"
                                    Text="☆" 
                                    BackgroundColor="Transparent"
                                    TextColor="#FFD700"
                                    FontSize="40"
                                    Clicked="OnStarClicked"
                                    CommandParameter="2"/>

                            <Button Grid.Column="2" 
                                    x:Name="Star3"
                                    Text="☆" 
                                    BackgroundColor="Transparent"
                                    TextColor="#FFD700"
                                    FontSize="40"
                                    Clicked="OnStarClicked"
                                    CommandParameter="3"/>

                            <Button Grid.Column="3" 
                                    x:Name="Star4"
                                    Text="☆" 
                                    BackgroundColor="Transparent"
                                    TextColor="#FFD700"
                                    FontSize="40"
                                    Clicked="OnStarClicked"
                                    CommandParameter="4"/>

                            <Button Grid.Column="4" 
                                    x:Name="Star5"
                                    Text="☆" 
                                    BackgroundColor="Transparent"
                                    TextColor="#FFD700"
                                    FontSize="40"
                                    Clicked="OnStarClicked"
                                    CommandParameter="5"/>
                        </Grid>

                        <!-- Texto descriptivo de la calificación -->
                        <Label x:Name="RatingDescriptionLabel"
                               Text="{extensions:Translate TouchStarsToRate}"
                               TextColor="{AppThemeBinding Light={StaticResource TextSecondaryLight}, Dark=#808080}"
                               FontSize="14"
                               HorizontalOptions="Center"/>
                    </StackLayout>
                </Frame>

                <!-- Sección de comentario -->
                <Frame BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundMediumLight}, Dark=#1E1E1E}" 
                       CornerRadius="10" 
                       Padding="20"
                       HasShadow="False">
                    <StackLayout Spacing="10">
                        <Label Text="{extensions:Translate YourComment}"
                               TextColor="{AppThemeBinding Light={StaticResource TextPrimaryLight}, Dark=White}"
                               FontSize="18"
                               FontAttributes="Bold"/>

                        <Editor x:Name="CommentEditor"
                                BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundLightLight}, Dark=#2A2A2A}"
                                TextColor="{AppThemeBinding Light={StaticResource TextPrimaryLight}, Dark=White}"
                                PlaceholderColor="{AppThemeBinding Light={StaticResource TextMutedLight}, Dark=#808080}"
                                Placeholder="{extensions:Translate ShareYourOpinion}"
                                MinimumHeightRequest="150"
                                AutoSize="TextChanges"
                                MaxLength="1000"/>

                        <Label x:Name="CharCountLabel"
                               Text="0 / 1000"
                               TextColor="{AppThemeBinding Light={StaticResource TextSecondaryLight}, Dark=#808080}"
                               FontSize="12"
                               HorizontalOptions="End"/>
                    </StackLayout>
                </Frame>

                <!-- Botones de acción -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                    <Button Grid.Column="0"
                            Text="{extensions:Translate CancelReview}"
                            BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundMediumLight}, Dark=#333333}"
                            TextColor="{AppThemeBinding Light={StaticResource TextPrimaryLight}, Dark=White}"
                            CornerRadius="25"
                            HeightRequest="50"
                            Clicked="OnCancelClicked"/>

                    <Button Grid.Column="1"
                            x:Name="SaveButton"
                            Text="{extensions:Translate SaveReview}"
                            BackgroundColor="{StaticResource Primary}"
                            TextColor="White"
                            CornerRadius="25"
                            HeightRequest="50"
                            Clicked="OnSaveClicked"
                            IsEnabled="False"/>
                </Grid>

                <!-- Mensaje de ayuda -->
                <Label Text="{extensions:Translate HelpMessage}"
                       TextColor="{AppThemeBinding Light={StaticResource TextSecondaryLight}, Dark=#808080}"
                       FontSize="12"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center"/>
            </StackLayout>
        </ScrollView>
    </ContentPage.Content>
</ContentPage>